---
import CardPokemon from './CardPokemon.astro';
import { allPokemonDetails } from '../services/pokemon';
import { typeTranslations } from '../utils/typeTranslations';

const pokemons = await allPokemonDetails();

const pokemonsWithSpanishTypes = pokemons.map((pokemon) => {
  const spanishTypes = pokemon.types.map(({ type }) => typeTranslations[type.name] ?? type.name);
  return { ...pokemon, spanishTypes };
});
---

<div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
  {
    pokemonsWithSpanishTypes.map((pokemon) => (
      <CardPokemon
        name={pokemon.name}
        id={pokemon.id}
        img={pokemon.sprites.other?.['official-artwork'].front_default || '/default-pokemon.png'}
        types={pokemon.spanishTypes}
      />
    ))
  }
</div>
